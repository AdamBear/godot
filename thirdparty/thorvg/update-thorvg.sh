rm -rf AUTHORS  inc  LICENSE  src *.zip
curl -L -O https://github.com/Samsung/thorvg/archive/refs/tags/v0.4.0.zip
bsdtar --strip-components=1 -xvf  *.zip
rm *.zip
rm -rf .github docs pc res test tools .git* *.md *.txt wasm_build.sh
find . -type f -name 'meson.build' -delete
rm -rf src/bin src/bindings src/examples src/wasm
rm -rf src/lib/gl_engine
rm -rf src/loaders/tvg src/loaders/raw src/loaders/jpg # TODO 2021-08-15 fire: restore JPG
rm -rf src/savers/tvg

cat << 'EOF' > inc/config.h
// Adapted from the config.h generated by ThorVG's meson buildsystem.

#pragma once

#define THORVG_SVG_LOADER_SUPPORT 1

#define THORVG_SW_RASTER_SUPPORT 1

#define THORVG_PNG_RASTER_SUPPORT 1

#define THORVG_VERSION_STRING "0.4.0"
EOF